{% extends "mf/base.html" %}

{% load shared mf %}

{% block main_header %}
    <h1>{{ town.title }}</h1>
{% endblock %}

{% block text_content %}
    {# uvodni text se zakladnimi udaji a kolacovym grafem #}
    <div id="primer">
        {# udaje o hernach #}
        <div class="hells">
            <div class="span-2">
                {% variable statistics.conflict_hell_perc|key:town.id as chells %}
                {% variable statistics.nonconflict_hell_perc|key:town.id as nchells %}
                <img title="Poměr nezákonně (červená výseč) a zákonně (zelená) povolených automatů" alt="Poměr nezákonně/zákonně povolených automatů" src="http://chart.googleapis.com/chart?chs=70x70&cht=p&chd=t:{{ chells|floatformat:0 }},{{ nchells|floatformat:0 }}&chco=FF0000,00FF00"/>
            </div>
            <div class="span-8 last">
                {% mf_primer_text town "hells" %}
            </div>
        </div>

        {# udaje o automatech #}
        <div class="machines">
            <div class="span-2">
                {% variable statistics.conflict_machine_perc|key:town.id as cmachines %}
                {% variable statistics.nonconflict_machine_perc|key:town.id as ncmachines %}
                <img title="Poměr nezákonně (červená výseč) a zákonně (zelená) povolených automatů" alt="Poměr nezákonně/zákonně povolených automatů" src="http://chart.googleapis.com/chart?chs=70x70&cht=p&chd=t:{{ cmachines|floatformat:0 }},{{ ncmachines|floatformat:0 }}&chco=FF0000,00FF00"/>
            </div>
            <div class="span-8 last">
                {% mf_primer_text town "machines" %}
            </div>
        </div>
    </div>

    <hr />

    <h3>Situace v ostatních obcích okresu</h3>
    <div class="outer-wrapper">
        {% mf_table "town" "hells" %}
    </div>
    <div class="outer-wrapper">
        {% mf_table "town" "machines" %}
    </div>
{% endblock %}

{% block map %}
    {{ block.super }}
    <div class="todo">
        <p>zaostreno na okres, jednotliva mesta formou kolecek;<br>
        protoze je mest strasne moc, zobrazime v mape kolecka jen pro mesta z daneho okresu;<br/>
        vygenerujeme tam zaroven i polygonu pro vsechny ostatni okresy a kliknutim na ne se dostane do detailu jineho okresu i s novymi mesty<br>
        jak pojmout kolecka? opet barevna skala? cislo uvnitr herny/maty? opet interaktivni na prepinani maty/herny?
        </p>
    </div>
{% endblock %}

{% block js %}
    {{ block.super }}
    <script type="text/javascript">
        window.actual = '{{ town.slug }}';
        window.actual_disctrict = {{ district.id }};
        window.url = '/kampan/mf/ajax/obce/';
    </script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/lib/towns.js"></script>
{% endblock %}

{# vim: set et si ts=4 sw=4 syn=django: #}
